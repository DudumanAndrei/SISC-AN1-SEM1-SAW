<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Administrare PetShop - AdÄƒugare Produse</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../styles/contact.css">
    <style>
        .section-title {
            border-bottom: 2px solid #ff9500;
            padding-bottom: 5px;
            margin-bottom: 20px;
            color: #5c3d1e;
        }
    </style>
</head>
<body style="background-color:rgb(207, 230, 176);">
    <div class="container mt-5 mb-5">
        <div class="card shadow p-4">
            <h2 class="text-center text-dark mb-4">ğŸ¾ AdÄƒugare Produs Nou Ã®n Baza de Date</h2>
            <p class="text-muted text-center">IntroduceÈ›i detaliile produsului È™i cele 5 caracteristici specifice.</p>
            
            <form id="add-product-form">
                <h5 class="section-title">InformaÈ›ii Generale</h5>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Nume Produs</label>
                        <input type="text" class="form-control" id="nume" placeholder="Ex: HranÄƒ CÃ¢ini Premium" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Categorie</label>
                        <select class="form-control" id="categorie" required>
                            <option value="CÃ¢ini">CÃ¢ini</option>
                            <option value="Pisici">Pisici</option>
                            <option value="Iepuri">Iepuri</option>
                            <option value="Papagali">Papagali</option>
                            <option value="Hamsteri">Hamsteri</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>PreÈ› (RON)</label>
                        <input type="number" step="0.01" class="form-control" id="pret" placeholder="0.00" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label>Cale Imagine (Folder)</label>
                        <input type="text" class="form-control" id="imagine" placeholder="../images/nume_poza.webp" required>
                    </div>
                </div>

                <h5 class="section-title mt-4">Cele 5 Caracteristici (Modelare Obiect)</h5>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label>CaracteristicÄƒ 1 (Ex: Greutate)</label>
                        <input type="text" class="form-control" id="c1" placeholder="Ex: 12 kg" required>
                    </div>
                    <div class="form-group col-md-4">
                        <label>CaracteristicÄƒ 2 (Ex: Material)</label>
                        <input type="text" class="form-control" id="c2" placeholder="Ex: Pui È™i Orez" required>
                    </div>
                    <div class="form-group col-md-4">
                        <label>CaracteristicÄƒ 3 (Ex: VÃ¢rstÄƒ)</label>
                        <input type="text" class="form-control" id="c3" placeholder="Ex: Adult" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>CaracteristicÄƒ 4 (Ex: Tip)</label>
                        <input type="text" class="form-control" id="c4" placeholder="Ex: HranÄƒ uscatÄƒ" required>
                    </div>
                    <div class="form-group col-md-6">
                        <label>CaracteristicÄƒ 5 (Ex: Beneficiu)</label>
                        <input type="text" class="form-control" id="c5" placeholder="Ex: Imunitate" required>
                    </div>
                </div>

                <button type="submit" class="btn btn-block btn-success mt-4 shadow-sm">ğŸš€ SalveazÄƒ Produsul Ã®n Baza de Date</button>
            </form>
            
            <div id="response-message" class="mt-3 text-center" style="display:none;"></div>
        </div>
        
        <div class="text-center mt-3">
            <a href="index.html" class="text-dark">â† Ãnapoi la Magazin</a>
        </div>
    </div>

    <script>
        document.getElementById('add-product-form').onsubmit = function(e) {
            e.preventDefault();

            // Preluare valori din input-uri
            const nume = document.getElementById('nume').value;
            const categorie = document.getElementById('categorie').value;
            const pret = document.getElementById('pret').value;
            const imagine = document.getElementById('imagine').value;
            const c1 = document.getElementById('c1').value;
            const c2 = document.getElementById('c2').value;
            const c3 = document.getElementById('c3').value;
            const c4 = document.getElementById('c4').value;
            const c5 = document.getElementById('c5').value;

            // Construire URL pentru endpoint-ul PHP
            // Folosim encodeURIComponent pentru a evita erorile la caractere speciale
            const url = `products.php?create=1` +
                        `&nume=${encodeURIComponent(nume)}` +
                        `&categorie=${encodeURIComponent(categorie)}` +
                        `&pret=${pret}` +
                        `&imagine=${encodeURIComponent(imagine)}` +
                        `&c1=${encodeURIComponent(c1)}` +
                        `&c2=${encodeURIComponent(c2)}` +
                        `&c3=${encodeURIComponent(c3)}` +
                        `&c4=${encodeURIComponent(c4)}` +
                        `&c5=${encodeURIComponent(c5)}`;

            // Trimitere cerere cÄƒtre server
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    const msgDiv = document.getElementById('response-message');
                    msgDiv.style.display = 'block';
                    
                    if(data.error === 0) {
                        msgDiv.innerHTML = `<div class="alert alert-success">${data.text}</div>`;
                        document.getElementById('add-product-form').reset(); // CurÄƒÈ›Äƒm formularul
                    } else {
                        msgDiv.innerHTML = `<div class="alert alert-danger">Eroare: ${data.text}</div>`;
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('A apÄƒrut o eroare la conectarea cu serverul.');
                });
        };
    </script>
</body>
</html>